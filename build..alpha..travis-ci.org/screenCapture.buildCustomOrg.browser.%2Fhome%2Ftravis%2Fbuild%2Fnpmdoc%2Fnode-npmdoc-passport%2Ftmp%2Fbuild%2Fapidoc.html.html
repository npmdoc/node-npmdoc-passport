<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://passportjs.org/">passport (v0.3.2)</a>
</h1>
<h4>Simple, unobtrusive authentication for Node.js.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport">module passport</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Passport">
            function <span class="apidocSignatureSpan">passport.</span>Passport
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Strategy">
            function <span class="apidocSignatureSpan">passport.</span>Strategy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy">
            function <span class="apidocSignatureSpan">passport.</span>strategies.SessionStrategy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>Strategy.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>_deserializers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>_framework</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>_infoTransformers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>_serializers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>_strategies</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>strategies</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>strategies.SessionStrategy.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">passport.</span>_key</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">passport.</span>_userProperty</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator">module passport.Authenticator</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.Authenticator">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype">module passport.Authenticator.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype._strategy">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>_strategy
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(strategy, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.authorize">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authorize
            <span class="apidocSignatureSpan">(strategy, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.deserializeUser">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>deserializeUser
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.framework">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>framework
            <span class="apidocSignatureSpan">(fw)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.init">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.initialize">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>initialize
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.serializeUser">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>serializeUser
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.session">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>session
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.transformAuthInfo">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>transformAuthInfo
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.unuse">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>unuse
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.use">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>use
            <span class="apidocSignatureSpan">(name, strategy)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Strategy">module passport.Strategy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Strategy.Strategy">
            function <span class="apidocSignatureSpan">passport.</span>Strategy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Strategy.prototype">module passport.Strategy.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Strategy.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport.Strategy.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(req, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport._framework">module passport._framework</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport._framework.authenticate">
            function <span class="apidocSignatureSpan">passport._framework.</span>authenticate
            <span class="apidocSignatureSpan">(passport, name, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport._framework.initialize">
            function <span class="apidocSignatureSpan">passport._framework.</span>initialize
            <span class="apidocSignatureSpan">(passport)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.strategies">module passport.strategies</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy">
            function <span class="apidocSignatureSpan">passport.strategies.</span>SessionStrategy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.strategies.SessionStrategy">module passport.strategies.SessionStrategy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy.SessionStrategy">
            function <span class="apidocSignatureSpan">passport.strategies.</span>SessionStrategy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy.super_">
            function <span class="apidocSignatureSpan">passport.strategies.SessionStrategy.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.strategies.SessionStrategy.prototype">module passport.strategies.SessionStrategy.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport.strategies.SessionStrategy.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(req, options)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport" id="apidoc.module.passport">module passport</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator" id="apidoc.element.passport.Authenticator">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Authenticator() {
  this._key = 'passport';
  this._strategies = {};
  this._serializers = [];
  this._deserializers = [];
  this._infoTransformers = [];
  this._framework = null;
  this._userProperty = 'user';

  this.init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Passport" id="apidoc.element.passport.Passport">
        function <span class="apidocSignatureSpan">passport.</span>Passport
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Authenticator() {
  this._key = 'passport';
  this._strategies = {};
  this._serializers = [];
  this._deserializers = [];
  this._infoTransformers = [];
  this._framework = null;
  this._userProperty = 'user';

  this.init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Strategy" id="apidoc.element.passport.Strategy">
        function <span class="apidocSignatureSpan">passport.</span>Strategy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy" id="apidoc.element.passport.strategies.SessionStrategy">
        function <span class="apidocSignatureSpan">passport.</span>strategies.SessionStrategy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SessionStrategy() {
  Strategy.call(this);
  this.name = 'session';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator" id="apidoc.module.passport.Authenticator">module passport.Authenticator</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.Authenticator" id="apidoc.element.passport.Authenticator.Authenticator">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Authenticator() {
  this._key = 'passport';
  this._strategies = {};
  this._serializers = [];
  this._deserializers = [];
  this._infoTransformers = [];
  this._framework = null;
  this._userProperty = 'user';

  this.init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype" id="apidoc.module.passport.Authenticator.prototype">module passport.Authenticator.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype._strategy" id="apidoc.element.passport.Authenticator.prototype._strategy">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>_strategy
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_strategy = function (name) {
  return this._strategies[name];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.authenticate" id="apidoc.element.passport.Authenticator.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(strategy, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (strategy, options, callback) {
  return this._framework.authenticate(this, strategy, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.authorize" id="apidoc.element.passport.Authenticator.prototype.authorize">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authorize
        <span class="apidocSignatureSpan">(strategy, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authorize = function (strategy, options, callback) {
  options = options || {};
  options.assignProperty = 'account';

  var fn = this._framework.authorize || this._framework.authenticate;
  return fn(this, strategy, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.deserializeUser" id="apidoc.element.passport.Authenticator.prototype.deserializeUser">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>deserializeUser
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deserializeUser = function (fn, req, done) {
  if (typeof fn === 'function') {
    return this._deserializers.push(fn);
  }

  // private implementation that traverses the chain of deserializers,
  // attempting to deserialize a user
  var obj = fn;

  // For backwards compatibility
  if (typeof req === 'function') {
    done = req;
    req = undefined;
  }

  var stack = this._deserializers;
  (function pass(i, err, user) {
    // deserializers use 'pass' as an error to skip processing
    if ('pass' === err) {
      err = undefined;
    }
    // an error or deserialized user was obtained, done
    if (err || user) { return done(err, user); }
    // a valid user existed when establishing the session, but that user has
    // since been removed
    if (user === null || user === false) { return done(null, false); }

    var layer = stack[i];
    if (!layer) {
      return done(new Error('Failed to deserialize user out of session'));
    }


    function deserialized(e, u) {
      pass(i + 1, e, u);
    }

    try {
      var arity = layer.length;
      if (arity == 3) {
        layer(req, obj, deserialized);
      } else {
        layer(obj, deserialized);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.framework" id="apidoc.element.passport.Authenticator.prototype.framework">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>framework
        <span class="apidocSignatureSpan">(fw)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">framework = function (fw) {
  this._framework = fw;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.init" id="apidoc.element.passport.Authenticator.prototype.init">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function () {
  this.framework(require('./framework/connect')());
  this.use(new SessionStrategy());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.initialize" id="apidoc.element.passport.Authenticator.prototype.initialize">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>initialize
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">initialize = function (options) {
  options = options || {};
  this._userProperty = options.userProperty || 'user';

  return this._framework.initialize(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.serializeUser" id="apidoc.element.passport.Authenticator.prototype.serializeUser">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>serializeUser
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serializeUser = function (fn, req, done) {
  if (typeof fn === 'function') {
    return this._serializers.push(fn);
  }

  // private implementation that traverses the chain of serializers, attempting
  // to serialize a user
  var user = fn;

  // For backwards compatibility
  if (typeof req === 'function') {
    done = req;
    req = undefined;
  }

  var stack = this._serializers;
  (function pass(i, err, obj) {
    // serializers use 'pass' as an error to skip processing
    if ('pass' === err) {
      err = undefined;
    }
    // an error or serialized object was obtained, done
    if (err || obj || obj === 0) { return done(err, obj); }

    var layer = stack[i];
    if (!layer) {
      return done(new Error('Failed to serialize user into session'));
    }


    function serialized(e, o) {
      pass(i + 1, e, o);
    }

    try {
      var arity = layer.length;
      if (arity == 3) {
        layer(req, user, serialized);
      } else {
        layer(user, serialized);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.session" id="apidoc.element.passport.Authenticator.prototype.session">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>session
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">session = function (options) {
  return this.authenticate('session', options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.transformAuthInfo" id="apidoc.element.passport.Authenticator.prototype.transformAuthInfo">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>transformAuthInfo
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">transformAuthInfo = function (fn, req, done) {
  if (typeof fn === 'function') {
    return this._infoTransformers.push(fn);
  }

  // private implementation that traverses the chain of transformers,
  // attempting to transform auth info
  var info = fn;

  // For backwards compatibility
  if (typeof req === 'function') {
    done = req;
    req = undefined;
  }

  var stack = this._infoTransformers;
  (function pass(i, err, tinfo) {
    // transformers use 'pass' as an error to skip processing
    if ('pass' === err) {
      err = undefined;
    }
    // an error or transformed info was obtained, done
    if (err || tinfo) { return done(err, tinfo); }

    var layer = stack[i];
    if (!layer) {
      // if no transformers are registered (or they all pass), the default
      // behavior is to use the un-transformed info as-is
      return done(null, info);
    }


    function transformed(e, t) {
      pass(i + 1, e, t);
    }

    try {
      var arity = layer.length;
      if (arity == 1) {
        // sync
        var t = layer(info);
        transformed(null, t);
      } else if (arity == 3) {
        layer(req, info, transformed);
      } else {
        layer(info, transformed);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.unuse" id="apidoc.element.passport.Authenticator.prototype.unuse">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>unuse
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unuse = function (name) {
  delete this._strategies[name];
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.use" id="apidoc.element.passport.Authenticator.prototype.use">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>use
        <span class="apidocSignatureSpan">(name, strategy)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">use = function (name, strategy) {
  if (!strategy) {
    strategy = name;
    name = strategy.name;
  }
  if (!name) { throw new Error('Authentication strategies must have a name'); }

  this._strategies[name] = strategy;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Strategy" id="apidoc.module.passport.Strategy">module passport.Strategy</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Strategy.Strategy" id="apidoc.element.passport.Strategy.Strategy">
        function <span class="apidocSignatureSpan">passport.</span>Strategy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Strategy.prototype" id="apidoc.module.passport.Strategy.prototype">module passport.Strategy.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Strategy.prototype.authenticate" id="apidoc.element.passport.Strategy.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport.Strategy.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(req, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (req, options) {
  throw new Error('Strategy#authenticate must be overridden by subclass');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport._framework" id="apidoc.module.passport._framework">module passport._framework</a></h1>


    <h2>
        <a href="#apidoc.element.passport._framework.authenticate" id="apidoc.element.passport._framework.authenticate">
        function <span class="apidocSignatureSpan">passport._framework.</span>authenticate
        <span class="apidocSignatureSpan">(passport, name, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function authenticate(passport, name, options, callback) {
  if (typeof options == 'function') {
    callback = options;
    options = {};
  }
  options = options || {};

  var multi = true;

  // Cast `name` to an array, allowing authentication to pass through a chain of
  // strategies.  The first strategy to succeed, redirect, or error will halt
  // the chain.  Authentication failures will proceed through each strategy in
  // series, ultimately failing if all strategies fail.
  //
  // This is typically used on API endpoints to allow clients to authenticate
  // using their preferred choice of Basic, Digest, token-based schemes, etc.
  // It is not feasible to construct a chain of multiple strategies that involve
  // redirection (for example both Facebook and Twitter), since the first one to
  // redirect will halt the chain.
  if (!Array.isArray(name)) {
    name = [ name ];
    multi = false;
  }

  return function authenticate(req, res, next) {
    if (http.IncomingMessage.prototype.logIn
        &amp;&amp; http.IncomingMessage.prototype.logIn !== IncomingMessageExt.logIn) {
      require('../framework/connect').__monkeypatchNode();
    }


    // accumulator for failures from each strategy in the chain
    var failures = [];

    function allFailed() {
      if (callback) {
        if (!multi) {
          return callback(null, false, failures[0].challenge, failures[0].status);
        } else {
          var challenges = failures.map(function(f) { return f.challenge; });
          var statuses = failures.map(function(f) { return f.status; });
          return callback(null, false, challenges, statuses);
        }
      }

      // Strategies are ordered by priority.  For the purpose of flashing a
      // message, the first failure will be displayed.
      var failure = failures[0] || {}
        , challenge = failure.challenge || {}
        , msg;

      if (options.failureFlash) {
        var flash = options.failureFlash;
        if (typeof flash == 'string') {
          flash = { type: 'error', message: flash };
        }
        flash.type = flash.type || 'error';

        var type = flash.type || challenge.type || 'error';
        msg = flash.message || challenge.message || challenge;
        if (typeof msg == 'string') {
          req.flash(type, msg);
        }
      }
      if (options.failureMessage) {
        msg = options.failureMessage;
        if (typeof msg == 'boolean') {
          msg = challenge.message || challenge;
        }
        if (typeof msg == 'string') {
          req.session.messages = req.session.messages || [];
          req.session.messages.push(msg);
        }
      }
      if (options.failureRedirect) {
        return res.redirect(options.failureRedirect);
      }

      // When failure handling is not delegated to the application, the default
      // is to respond with 401 Unauthorized.  Note that the WWW-Authenticate
      // header will be set according to the strategies in use (see
      // actions#fail).  If multiple strategies failed, each of their challenges
      // will be included in the response.
      var rchallenge = []
        , rstatus, status;

      for (var j = 0, len = failures.length; j &lt; len; j++) {
        failure = failures[j];
        challenge = failure.challenge;
        status = failure.status;

        rstatus = rstatus || status;
        if (typeof challenge == 'string') {
          rchallenge.push(challenge);
        }
      }

      res.statusCode = rstatus || 401;
      if (res.statusCode == 401 &amp;&amp; rchallenge.length) {
        res.setHeader('WWW-Authenticate', rchallenge);
      }
      if (options.failWithError) {
        return next(new AuthenticationError(http.STATUS_CODES[res.statusCode], rstatus));
      }
      res.end(http.STATUS_CODES[res.statusCode]);
    }

    (function attempt(i) {
      var layer = name[i];
      // If no more strategies exist in the chain, authentication has failed.
      if (!layer) { return allFailed(); }

      // Get the strategy, which will be used as prot ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport._framework.initialize" id="apidoc.element.passport._framework.initialize">
        function <span class="apidocSignatureSpan">passport._framework.</span>initialize
        <span class="apidocSignatureSpan">(passport)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initialize(passport) {

  return function initialize(req, res, next) {
    req._passport = {};
    req._passport.instance = passport;

    if (req.session &amp;&amp; req.session[passport._key]) {
      // load data from existing session
      req._passport.session = req.session[passport._key];
    }

    next();
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.strategies" id="apidoc.module.passport.strategies">module passport.strategies</a></h1>


    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy" id="apidoc.element.passport.strategies.SessionStrategy">
        function <span class="apidocSignatureSpan">passport.strategies.</span>SessionStrategy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SessionStrategy() {
  Strategy.call(this);
  this.name = 'session';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.strategies.SessionStrategy" id="apidoc.module.passport.strategies.SessionStrategy">module passport.strategies.SessionStrategy</a></h1>


    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy.SessionStrategy" id="apidoc.element.passport.strategies.SessionStrategy.SessionStrategy">
        function <span class="apidocSignatureSpan">passport.strategies.</span>SessionStrategy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SessionStrategy() {
  Strategy.call(this);
  this.name = 'session';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy.super_" id="apidoc.element.passport.strategies.SessionStrategy.super_">
        function <span class="apidocSignatureSpan">passport.strategies.SessionStrategy.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.strategies.SessionStrategy.prototype" id="apidoc.module.passport.strategies.SessionStrategy.prototype">module passport.strategies.SessionStrategy.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate" id="apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport.strategies.SessionStrategy.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(req, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (req, options) {
  if (!req._passport) { return this.error(new Error('passport.initialize() middleware not in use')); }
  options = options || {};

  var self = this,
      su;
  if (req._passport.session) {
    su = req._passport.session.user;
  }

  if (su || su === 0) {
    // NOTE: Stream pausing is desirable in the case where later middleware is
    //       listening for events emitted from request.  For discussion on the
    //       matter, refer to: https://github.com/jaredhanson/passport/pull/106

    var paused = options.pauseStream ? pause(req) : null;
    req._passport.instance.deserializeUser(su, req, function(err, user) {
      if (err) { return self.error(err); }
      if (!user) {
        delete req._passport.session.user;
        self.pass();
        if (paused) {
          paused.resume();
        }
        return;
      }
      var property = req._passport.instance._userProperty || 'user';
      req[property] = user;
      self.pass();
      if (paused) {
        paused.resume();
      }
    });
  } else {
    self.pass();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>
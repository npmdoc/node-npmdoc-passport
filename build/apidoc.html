<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://passportjs.org/"

    >passport (v0.3.2)</a>
</h1>
<h4>Simple, unobtrusive authentication for Node.js.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport">module passport</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype._strategy">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype._strategy
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.authenticate
            <span class="apidocSignatureSpan">(strategy, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.authorize">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.authorize
            <span class="apidocSignatureSpan">(strategy, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.deserializeUser">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.deserializeUser
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.framework">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.framework
            <span class="apidocSignatureSpan">(fw)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.init">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.initialize">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.initialize
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.serializeUser">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.serializeUser
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.session">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.session
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.transformAuthInfo">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.transformAuthInfo
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.unuse">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.unuse
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.use">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.use
            <span class="apidocSignatureSpan">(name, strategy)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Passport">
            function <span class="apidocSignatureSpan">passport.</span>Passport
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Strategy">
            function <span class="apidocSignatureSpan">passport.</span>Strategy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Strategy.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport.</span>Strategy.prototype.authenticate
            <span class="apidocSignatureSpan">(req, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport._framework.authenticate">
            function <span class="apidocSignatureSpan">passport.</span>_framework.authenticate
            <span class="apidocSignatureSpan">(passport, name, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport._framework.initialize">
            function <span class="apidocSignatureSpan">passport.</span>_framework.initialize
            <span class="apidocSignatureSpan">(passport)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy">
            function <span class="apidocSignatureSpan">passport.</span>strategies.SessionStrategy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport.</span>strategies.SessionStrategy.prototype.authenticate
            <span class="apidocSignatureSpan">(req, options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>Strategy.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>_deserializers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>_framework</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>_infoTransformers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>_serializers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>_strategies</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>strategies</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport.</span>strategies.SessionStrategy.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">passport.</span>_key</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">passport.</span>_userProperty</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator">module passport.Authenticator</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.Authenticator">
            function <span class="apidocSignatureSpan">passport.</span>Authenticator
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype">module passport.Authenticator.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype._strategy">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>_strategy
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(strategy, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.authorize">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authorize
            <span class="apidocSignatureSpan">(strategy, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.deserializeUser">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>deserializeUser
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.framework">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>framework
            <span class="apidocSignatureSpan">(fw)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.init">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.initialize">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>initialize
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.serializeUser">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>serializeUser
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.session">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>session
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.transformAuthInfo">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>transformAuthInfo
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.unuse">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>unuse
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.use">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>use
            <span class="apidocSignatureSpan">(name, strategy)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype._strategy">module passport.Authenticator.prototype._strategy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype._strategy._strategy">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>_strategy
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.authenticate">module passport.Authenticator.prototype.authenticate</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.authenticate.authenticate">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(strategy, options, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.authorize">module passport.Authenticator.prototype.authorize</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.authorize.authorize">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authorize
            <span class="apidocSignatureSpan">(strategy, options, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.deserializeUser">module passport.Authenticator.prototype.deserializeUser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.deserializeUser.deserializeUser">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>deserializeUser
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.framework">module passport.Authenticator.prototype.framework</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.framework.framework">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>framework
            <span class="apidocSignatureSpan">(fw)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.init">module passport.Authenticator.prototype.init</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.init.init">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.initialize">module passport.Authenticator.prototype.initialize</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.initialize.initialize">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>initialize
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.serializeUser">module passport.Authenticator.prototype.serializeUser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.serializeUser.serializeUser">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>serializeUser
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.session">module passport.Authenticator.prototype.session</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.session.session">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>session
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.transformAuthInfo">module passport.Authenticator.prototype.transformAuthInfo</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.transformAuthInfo.transformAuthInfo">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>transformAuthInfo
            <span class="apidocSignatureSpan">(fn, req, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.unuse">module passport.Authenticator.prototype.unuse</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.unuse.unuse">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>unuse
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Authenticator.prototype.use">module passport.Authenticator.prototype.use</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Authenticator.prototype.use.use">
            function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>use
            <span class="apidocSignatureSpan">(name, strategy)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Strategy">module passport.Strategy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Strategy.Strategy">
            function <span class="apidocSignatureSpan">passport.</span>Strategy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Strategy.prototype">module passport.Strategy.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Strategy.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport.Strategy.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(req, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.Strategy.prototype.authenticate">module passport.Strategy.prototype.authenticate</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.Strategy.prototype.authenticate.authenticate">
            function <span class="apidocSignatureSpan">passport.Strategy.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(req, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport._framework">module passport._framework</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport._framework.authenticate">
            function <span class="apidocSignatureSpan">passport._framework.</span>authenticate
            <span class="apidocSignatureSpan">(passport, name, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport._framework.initialize">
            function <span class="apidocSignatureSpan">passport._framework.</span>initialize
            <span class="apidocSignatureSpan">(passport)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport._framework.authenticate">module passport._framework.authenticate</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport._framework.authenticate.authenticate">
            function <span class="apidocSignatureSpan">passport._framework.</span>authenticate
            <span class="apidocSignatureSpan">(passport, name, options, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport._framework.initialize">module passport._framework.initialize</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport._framework.initialize.initialize">
            function <span class="apidocSignatureSpan">passport._framework.</span>initialize
            <span class="apidocSignatureSpan">(passport)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.strategies">module passport.strategies</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy">
            function <span class="apidocSignatureSpan">passport.strategies.</span>SessionStrategy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.strategies.SessionStrategy">module passport.strategies.SessionStrategy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy.SessionStrategy">
            function <span class="apidocSignatureSpan">passport.strategies.</span>SessionStrategy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy.super_">
            function <span class="apidocSignatureSpan">passport.strategies.SessionStrategy.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.strategies.SessionStrategy.prototype">module passport.strategies.SessionStrategy.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport.strategies.SessionStrategy.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(req, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport.strategies.SessionStrategy.prototype.authenticate">module passport.strategies.SessionStrategy.prototype.authenticate</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate.authenticate">
            function <span class="apidocSignatureSpan">passport.strategies.SessionStrategy.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(req, options)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport" id="apidoc.module.passport">module passport</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator" id="apidoc.element.passport.Authenticator">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Authenticator() {
  this._key = &#x27;passport&#x27;;
  this._strategies = {};
  this._serializers = [];
  this._deserializers = [];
  this._infoTransformers = [];
  this._framework = null;
  this._userProperty = &#x27;user&#x27;;

  this.init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype._strategy" id="apidoc.element.passport.Authenticator.prototype._strategy">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype._strategy
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype._strategy = function (name) {
  return this._strategies[name];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.authenticate" id="apidoc.element.passport.Authenticator.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.authenticate
        <span class="apidocSignatureSpan">(strategy, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.authenticate = function (strategy, options, callback) {
  return this._framework.authenticate(this, strategy, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.authorize" id="apidoc.element.passport.Authenticator.prototype.authorize">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.authorize
        <span class="apidocSignatureSpan">(strategy, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.authorize = function (strategy, options, callback) {
  options = options || {};
  options.assignProperty = &#x27;account&#x27;;

  var fn = this._framework.authorize || this._framework.authenticate;
  return fn(this, strategy, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.deserializeUser" id="apidoc.element.passport.Authenticator.prototype.deserializeUser">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.deserializeUser
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.deserializeUser = function (fn, req, done) {
  if (typeof fn === &#x27;function&#x27;) {
    return this._deserializers.push(fn);
  }

  // private implementation that traverses the chain of deserializers,
  // attempting to deserialize a user
  var obj = fn;

  // For backwards compatibility
  if (typeof req === &#x27;function&#x27;) {
    done = req;
    req = undefined;
  }

  var stack = this._deserializers;
  (function pass(i, err, user) {
    // deserializers use &#x27;pass&#x27; as an error to skip processing
    if (&#x27;pass&#x27; === err) {
      err = undefined;
    }
    // an error or deserialized user was obtained, done
    if (err || user) { return done(err, user); }
    // a valid user existed when establishing the session, but that user has
    // since been removed
    if (user === null || user === false) { return done(null, false); }

    var layer = stack[i];
    if (!layer) {
      return done(new Error(&#x27;Failed to deserialize user out of session&#x27;));
    }


    function deserialized(e, u) {
      pass(i + 1, e, u);
    }

    try {
      var arity = layer.length;
      if (arity == 3) {
        layer(req, obj, deserialized);
      } else {
        layer(obj, deserialized);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.framework" id="apidoc.element.passport.Authenticator.prototype.framework">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.framework
        <span class="apidocSignatureSpan">(fw)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.framework = function (fw) {
  this._framework = fw;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.init" id="apidoc.element.passport.Authenticator.prototype.init">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.init = function () {
  this.framework(require(&#x27;./framework/connect&#x27;)());
  this.use(new SessionStrategy());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.initialize" id="apidoc.element.passport.Authenticator.prototype.initialize">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.initialize
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.initialize = function (options) {
  options = options || {};
  this._userProperty = options.userProperty || &#x27;user&#x27;;

  return this._framework.initialize(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.serializeUser" id="apidoc.element.passport.Authenticator.prototype.serializeUser">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.serializeUser
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.serializeUser = function (fn, req, done) {
  if (typeof fn === &#x27;function&#x27;) {
    return this._serializers.push(fn);
  }

  // private implementation that traverses the chain of serializers, attempting
  // to serialize a user
  var user = fn;

  // For backwards compatibility
  if (typeof req === &#x27;function&#x27;) {
    done = req;
    req = undefined;
  }

  var stack = this._serializers;
  (function pass(i, err, obj) {
    // serializers use &#x27;pass&#x27; as an error to skip processing
    if (&#x27;pass&#x27; === err) {
      err = undefined;
    }
    // an error or serialized object was obtained, done
    if (err || obj || obj === 0) { return done(err, obj); }

    var layer = stack[i];
    if (!layer) {
      return done(new Error(&#x27;Failed to serialize user into session&#x27;));
    }


    function serialized(e, o) {
      pass(i + 1, e, o);
    }

    try {
      var arity = layer.length;
      if (arity == 3) {
        layer(req, user, serialized);
      } else {
        layer(user, serialized);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.session" id="apidoc.element.passport.Authenticator.prototype.session">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.session
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.session = function (options) {
  return this.authenticate(&#x27;session&#x27;, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.transformAuthInfo" id="apidoc.element.passport.Authenticator.prototype.transformAuthInfo">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.transformAuthInfo
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.transformAuthInfo = function (fn, req, done) {
  if (typeof fn === &#x27;function&#x27;) {
    return this._infoTransformers.push(fn);
  }

  // private implementation that traverses the chain of transformers,
  // attempting to transform auth info
  var info = fn;

  // For backwards compatibility
  if (typeof req === &#x27;function&#x27;) {
    done = req;
    req = undefined;
  }

  var stack = this._infoTransformers;
  (function pass(i, err, tinfo) {
    // transformers use &#x27;pass&#x27; as an error to skip processing
    if (&#x27;pass&#x27; === err) {
      err = undefined;
    }
    // an error or transformed info was obtained, done
    if (err || tinfo) { return done(err, tinfo); }

    var layer = stack[i];
    if (!layer) {
      // if no transformers are registered (or they all pass), the default
      // behavior is to use the un-transformed info as-is
      return done(null, info);
    }


    function transformed(e, t) {
      pass(i + 1, e, t);
    }

    try {
      var arity = layer.length;
      if (arity == 1) {
        // sync
        var t = layer(info);
        transformed(null, t);
      } else if (arity == 3) {
        layer(req, info, transformed);
      } else {
        layer(info, transformed);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.unuse" id="apidoc.element.passport.Authenticator.prototype.unuse">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.unuse
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.unuse = function (name) {
  delete this._strategies[name];
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.use" id="apidoc.element.passport.Authenticator.prototype.use">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator.prototype.use
        <span class="apidocSignatureSpan">(name, strategy)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticator.prototype.use = function (name, strategy) {
  if (!strategy) {
    strategy = name;
    name = strategy.name;
  }
  if (!name) { throw new Error(&#x27;Authentication strategies must have a name&#x27;); }

  this._strategies[name] = strategy;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Passport" id="apidoc.element.passport.Passport">
        function <span class="apidocSignatureSpan">passport.</span>Passport
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Authenticator() {
  this._key = &#x27;passport&#x27;;
  this._strategies = {};
  this._serializers = [];
  this._deserializers = [];
  this._infoTransformers = [];
  this._framework = null;
  this._userProperty = &#x27;user&#x27;;

  this.init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Strategy" id="apidoc.element.passport.Strategy">
        function <span class="apidocSignatureSpan">passport.</span>Strategy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Strategy.prototype.authenticate" id="apidoc.element.passport.Strategy.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport.</span>Strategy.prototype.authenticate
        <span class="apidocSignatureSpan">(req, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Strategy.prototype.authenticate = function (req, options) {
  throw new Error(&#x27;Strategy#authenticate must be overridden by subclass&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport._framework.authenticate" id="apidoc.element.passport._framework.authenticate">
        function <span class="apidocSignatureSpan">passport.</span>_framework.authenticate
        <span class="apidocSignatureSpan">(passport, name, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function authenticate(passport, name, options, callback) {
  if (typeof options == &#x27;function&#x27;) {
    callback = options;
    options = {};
  }
  options = options || {};

  var multi = true;

  // Cast `name` to an array, allowing authentication to pass through a chain of
  // strategies.  The first strategy to succeed, redirect, or error will halt
  // the chain.  Authentication failures will proceed through each strategy in
  // series, ultimately failing if all strategies fail.
  //
  // This is typically used on API endpoints to allow clients to authenticate
  // using their preferred choice of Basic, Digest, token-based schemes, etc.
  // It is not feasible to construct a chain of multiple strategies that involve
  // redirection (for example both Facebook and Twitter), since the first one to
  // redirect will halt the chain.
  if (!Array.isArray(name)) {
    name = [ name ];
    multi = false;
  }

  return function authenticate(req, res, next) {
    if (http.IncomingMessage.prototype.logIn
        &#x26;&#x26; http.IncomingMessage.prototype.logIn !== IncomingMessageExt.logIn) {
      require(&#x27;../framework/connect&#x27;).__monkeypatchNode();
    }


    // accumulator for failures from each strategy in the chain
    var failures = [];

    function allFailed() {
      if (callback) {
        if (!multi) {
          return callback(null, false, failures[0].challenge, failures[0].status);
        } else {
          var challenges = failures.map(function(f) { return f.challenge; });
          var statuses = failures.map(function(f) { return f.status; });
          return callback(null, false, challenges, statuses);
        }
      }

      // Strategies are ordered by priority.  For the purpose of flashing a
      // message, the first failure will be displayed.
      var failure = failures[0] || {}
        , challenge = failure.challenge || {}
        , msg;

      if (options.failureFlash) {
        var flash = options.failureFlash;
        if (typeof flash == &#x27;string&#x27;) {
          flash = { type: &#x27;error&#x27;, message: flash };
        }
        flash.type = flash.type || &#x27;error&#x27;;

        var type = flash.type || challenge.type || &#x27;error&#x27;;
        msg = flash.message || challenge.message || challenge;
        if (typeof msg == &#x27;string&#x27;) {
          req.flash(type, msg);
        }
      }
      if (options.failureMessage) {
        msg = options.failureMessage;
        if (typeof msg == &#x27;boolean&#x27;) {
          msg = challenge.message || challenge;
        }
        if (typeof msg == &#x27;string&#x27;) {
          req.session.messages = req.session.messages || [];
          req.session.messages.push(msg);
        }
      }
      if (options.failureRedirect) {
        return res.redirect(options.failureRedirect);
      }

      // When failure handling is not delegated to the application, the default
      // is to respond with 401 Unauthorized.  Note that the WWW-Authenticate
      // header will be set according to the strategies in use (see
      // actions#fail).  If multiple strategies failed, each of their challenges
      // will be included in the response.
      var rchallenge = []
        , rstatus, status;

      for (var j = 0, len = failures.length; j &#x3c; len; j++) {
        failure = failures[j];
        challenge = failure.challenge;
        status = failure.status;

        rstatus = rstatus || status;
        if (typeof challenge == &#x27;string&#x27;) {
          rchallenge.push(challenge);
        }
      }

      res.statusCode = rstatus || 401;
      if (res.statusCode == 401 &#x26;&#x26; rchallenge.length) {
        res.setHeader(&#x27;WWW-Authenticate&#x27;, rchallenge);
      }
      if (options.failWithError) {
        return next(new AuthenticationError(http.STATUS_CODES[res.statusCode], rstatus));
      }
      res.end(http.STATUS_CODES[res.statusCode]);
    }

    (function attempt(i) {
      var layer = name[i];
      // If no more strategies exist in the chain, authentication has failed.
      if (!layer) { return allFailed(); }

      // Get the strategy, which will be used as prot ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport._framework.initialize" id="apidoc.element.passport._framework.initialize">
        function <span class="apidocSignatureSpan">passport.</span>_framework.initialize
        <span class="apidocSignatureSpan">(passport)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initialize(passport) {

  return function initialize(req, res, next) {
    req._passport = {};
    req._passport.instance = passport;

    if (req.session &#x26;&#x26; req.session[passport._key]) {
      // load data from existing session
      req._passport.session = req.session[passport._key];
    }

    next();
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy" id="apidoc.element.passport.strategies.SessionStrategy">
        function <span class="apidocSignatureSpan">passport.</span>strategies.SessionStrategy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SessionStrategy() {
  Strategy.call(this);
  this.name = &#x27;session&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate" id="apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport.</span>strategies.SessionStrategy.prototype.authenticate
        <span class="apidocSignatureSpan">(req, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">strategies.SessionStrategy.prototype.authenticate = function (req, options) {
  if (!req._passport) { return this.error(new Error(&#x27;passport.initialize() middleware not in use&#x27;)); }
  options = options || {};

  var self = this,
      su;
  if (req._passport.session) {
    su = req._passport.session.user;
  }

  if (su || su === 0) {
    // NOTE: Stream pausing is desirable in the case where later middleware is
    //       listening for events emitted from request.  For discussion on the
    //       matter, refer to: https://github.com/jaredhanson/passport/pull/106

    var paused = options.pauseStream ? pause(req) : null;
    req._passport.instance.deserializeUser(su, req, function(err, user) {
      if (err) { return self.error(err); }
      if (!user) {
        delete req._passport.session.user;
        self.pass();
        if (paused) {
          paused.resume();
        }
        return;
      }
      var property = req._passport.instance._userProperty || &#x27;user&#x27;;
      req[property] = user;
      self.pass();
      if (paused) {
        paused.resume();
      }
    });
  } else {
    self.pass();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator" id="apidoc.module.passport.Authenticator">module passport.Authenticator</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.Authenticator" id="apidoc.element.passport.Authenticator.Authenticator">
        function <span class="apidocSignatureSpan">passport.</span>Authenticator
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Authenticator() {
  this._key = &#x27;passport&#x27;;
  this._strategies = {};
  this._serializers = [];
  this._deserializers = [];
  this._infoTransformers = [];
  this._framework = null;
  this._userProperty = &#x27;user&#x27;;

  this.init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype" id="apidoc.module.passport.Authenticator.prototype">module passport.Authenticator.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype._strategy" id="apidoc.element.passport.Authenticator.prototype._strategy">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>_strategy
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_strategy = function (name) {
  return this._strategies[name];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.authenticate" id="apidoc.element.passport.Authenticator.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(strategy, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (strategy, options, callback) {
  return this._framework.authenticate(this, strategy, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.authorize" id="apidoc.element.passport.Authenticator.prototype.authorize">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authorize
        <span class="apidocSignatureSpan">(strategy, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authorize = function (strategy, options, callback) {
  options = options || {};
  options.assignProperty = &#x27;account&#x27;;

  var fn = this._framework.authorize || this._framework.authenticate;
  return fn(this, strategy, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.deserializeUser" id="apidoc.element.passport.Authenticator.prototype.deserializeUser">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>deserializeUser
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deserializeUser = function (fn, req, done) {
  if (typeof fn === &#x27;function&#x27;) {
    return this._deserializers.push(fn);
  }

  // private implementation that traverses the chain of deserializers,
  // attempting to deserialize a user
  var obj = fn;

  // For backwards compatibility
  if (typeof req === &#x27;function&#x27;) {
    done = req;
    req = undefined;
  }

  var stack = this._deserializers;
  (function pass(i, err, user) {
    // deserializers use &#x27;pass&#x27; as an error to skip processing
    if (&#x27;pass&#x27; === err) {
      err = undefined;
    }
    // an error or deserialized user was obtained, done
    if (err || user) { return done(err, user); }
    // a valid user existed when establishing the session, but that user has
    // since been removed
    if (user === null || user === false) { return done(null, false); }

    var layer = stack[i];
    if (!layer) {
      return done(new Error(&#x27;Failed to deserialize user out of session&#x27;));
    }


    function deserialized(e, u) {
      pass(i + 1, e, u);
    }

    try {
      var arity = layer.length;
      if (arity == 3) {
        layer(req, obj, deserialized);
      } else {
        layer(obj, deserialized);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.framework" id="apidoc.element.passport.Authenticator.prototype.framework">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>framework
        <span class="apidocSignatureSpan">(fw)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">framework = function (fw) {
  this._framework = fw;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.init" id="apidoc.element.passport.Authenticator.prototype.init">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function () {
  this.framework(require(&#x27;./framework/connect&#x27;)());
  this.use(new SessionStrategy());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.initialize" id="apidoc.element.passport.Authenticator.prototype.initialize">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>initialize
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">initialize = function (options) {
  options = options || {};
  this._userProperty = options.userProperty || &#x27;user&#x27;;

  return this._framework.initialize(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.serializeUser" id="apidoc.element.passport.Authenticator.prototype.serializeUser">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>serializeUser
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serializeUser = function (fn, req, done) {
  if (typeof fn === &#x27;function&#x27;) {
    return this._serializers.push(fn);
  }

  // private implementation that traverses the chain of serializers, attempting
  // to serialize a user
  var user = fn;

  // For backwards compatibility
  if (typeof req === &#x27;function&#x27;) {
    done = req;
    req = undefined;
  }

  var stack = this._serializers;
  (function pass(i, err, obj) {
    // serializers use &#x27;pass&#x27; as an error to skip processing
    if (&#x27;pass&#x27; === err) {
      err = undefined;
    }
    // an error or serialized object was obtained, done
    if (err || obj || obj === 0) { return done(err, obj); }

    var layer = stack[i];
    if (!layer) {
      return done(new Error(&#x27;Failed to serialize user into session&#x27;));
    }


    function serialized(e, o) {
      pass(i + 1, e, o);
    }

    try {
      var arity = layer.length;
      if (arity == 3) {
        layer(req, user, serialized);
      } else {
        layer(user, serialized);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.session" id="apidoc.element.passport.Authenticator.prototype.session">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>session
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">session = function (options) {
  return this.authenticate(&#x27;session&#x27;, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.transformAuthInfo" id="apidoc.element.passport.Authenticator.prototype.transformAuthInfo">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>transformAuthInfo
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">transformAuthInfo = function (fn, req, done) {
  if (typeof fn === &#x27;function&#x27;) {
    return this._infoTransformers.push(fn);
  }

  // private implementation that traverses the chain of transformers,
  // attempting to transform auth info
  var info = fn;

  // For backwards compatibility
  if (typeof req === &#x27;function&#x27;) {
    done = req;
    req = undefined;
  }

  var stack = this._infoTransformers;
  (function pass(i, err, tinfo) {
    // transformers use &#x27;pass&#x27; as an error to skip processing
    if (&#x27;pass&#x27; === err) {
      err = undefined;
    }
    // an error or transformed info was obtained, done
    if (err || tinfo) { return done(err, tinfo); }

    var layer = stack[i];
    if (!layer) {
      // if no transformers are registered (or they all pass), the default
      // behavior is to use the un-transformed info as-is
      return done(null, info);
    }


    function transformed(e, t) {
      pass(i + 1, e, t);
    }

    try {
      var arity = layer.length;
      if (arity == 1) {
        // sync
        var t = layer(info);
        transformed(null, t);
      } else if (arity == 3) {
        layer(req, info, transformed);
      } else {
        layer(info, transformed);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.unuse" id="apidoc.element.passport.Authenticator.prototype.unuse">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>unuse
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unuse = function (name) {
  delete this._strategies[name];
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.use" id="apidoc.element.passport.Authenticator.prototype.use">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>use
        <span class="apidocSignatureSpan">(name, strategy)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">use = function (name, strategy) {
  if (!strategy) {
    strategy = name;
    name = strategy.name;
  }
  if (!name) { throw new Error(&#x27;Authentication strategies must have a name&#x27;); }

  this._strategies[name] = strategy;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype._strategy" id="apidoc.module.passport.Authenticator.prototype._strategy">module passport.Authenticator.prototype._strategy</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype._strategy._strategy" id="apidoc.element.passport.Authenticator.prototype._strategy._strategy">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>_strategy
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_strategy = function (name) {
  return this._strategies[name];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.authenticate" id="apidoc.module.passport.Authenticator.prototype.authenticate">module passport.Authenticator.prototype.authenticate</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.authenticate.authenticate" id="apidoc.element.passport.Authenticator.prototype.authenticate.authenticate">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(strategy, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (strategy, options, callback) {
  return this._framework.authenticate(this, strategy, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.authorize" id="apidoc.module.passport.Authenticator.prototype.authorize">module passport.Authenticator.prototype.authorize</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.authorize.authorize" id="apidoc.element.passport.Authenticator.prototype.authorize.authorize">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>authorize
        <span class="apidocSignatureSpan">(strategy, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authorize = function (strategy, options, callback) {
  options = options || {};
  options.assignProperty = &#x27;account&#x27;;

  var fn = this._framework.authorize || this._framework.authenticate;
  return fn(this, strategy, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.deserializeUser" id="apidoc.module.passport.Authenticator.prototype.deserializeUser">module passport.Authenticator.prototype.deserializeUser</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.deserializeUser.deserializeUser" id="apidoc.element.passport.Authenticator.prototype.deserializeUser.deserializeUser">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>deserializeUser
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deserializeUser = function (fn, req, done) {
  if (typeof fn === &#x27;function&#x27;) {
    return this._deserializers.push(fn);
  }

  // private implementation that traverses the chain of deserializers,
  // attempting to deserialize a user
  var obj = fn;

  // For backwards compatibility
  if (typeof req === &#x27;function&#x27;) {
    done = req;
    req = undefined;
  }

  var stack = this._deserializers;
  (function pass(i, err, user) {
    // deserializers use &#x27;pass&#x27; as an error to skip processing
    if (&#x27;pass&#x27; === err) {
      err = undefined;
    }
    // an error or deserialized user was obtained, done
    if (err || user) { return done(err, user); }
    // a valid user existed when establishing the session, but that user has
    // since been removed
    if (user === null || user === false) { return done(null, false); }

    var layer = stack[i];
    if (!layer) {
      return done(new Error(&#x27;Failed to deserialize user out of session&#x27;));
    }


    function deserialized(e, u) {
      pass(i + 1, e, u);
    }

    try {
      var arity = layer.length;
      if (arity == 3) {
        layer(req, obj, deserialized);
      } else {
        layer(obj, deserialized);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.framework" id="apidoc.module.passport.Authenticator.prototype.framework">module passport.Authenticator.prototype.framework</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.framework.framework" id="apidoc.element.passport.Authenticator.prototype.framework.framework">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>framework
        <span class="apidocSignatureSpan">(fw)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">framework = function (fw) {
  this._framework = fw;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.init" id="apidoc.module.passport.Authenticator.prototype.init">module passport.Authenticator.prototype.init</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.init.init" id="apidoc.element.passport.Authenticator.prototype.init.init">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function () {
  this.framework(require(&#x27;./framework/connect&#x27;)());
  this.use(new SessionStrategy());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.initialize" id="apidoc.module.passport.Authenticator.prototype.initialize">module passport.Authenticator.prototype.initialize</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.initialize.initialize" id="apidoc.element.passport.Authenticator.prototype.initialize.initialize">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>initialize
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">initialize = function (options) {
  options = options || {};
  this._userProperty = options.userProperty || &#x27;user&#x27;;

  return this._framework.initialize(this, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.serializeUser" id="apidoc.module.passport.Authenticator.prototype.serializeUser">module passport.Authenticator.prototype.serializeUser</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.serializeUser.serializeUser" id="apidoc.element.passport.Authenticator.prototype.serializeUser.serializeUser">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>serializeUser
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serializeUser = function (fn, req, done) {
  if (typeof fn === &#x27;function&#x27;) {
    return this._serializers.push(fn);
  }

  // private implementation that traverses the chain of serializers, attempting
  // to serialize a user
  var user = fn;

  // For backwards compatibility
  if (typeof req === &#x27;function&#x27;) {
    done = req;
    req = undefined;
  }

  var stack = this._serializers;
  (function pass(i, err, obj) {
    // serializers use &#x27;pass&#x27; as an error to skip processing
    if (&#x27;pass&#x27; === err) {
      err = undefined;
    }
    // an error or serialized object was obtained, done
    if (err || obj || obj === 0) { return done(err, obj); }

    var layer = stack[i];
    if (!layer) {
      return done(new Error(&#x27;Failed to serialize user into session&#x27;));
    }


    function serialized(e, o) {
      pass(i + 1, e, o);
    }

    try {
      var arity = layer.length;
      if (arity == 3) {
        layer(req, user, serialized);
      } else {
        layer(user, serialized);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.session" id="apidoc.module.passport.Authenticator.prototype.session">module passport.Authenticator.prototype.session</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.session.session" id="apidoc.element.passport.Authenticator.prototype.session.session">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>session
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">session = function (options) {
  return this.authenticate(&#x27;session&#x27;, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.transformAuthInfo" id="apidoc.module.passport.Authenticator.prototype.transformAuthInfo">module passport.Authenticator.prototype.transformAuthInfo</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.transformAuthInfo.transformAuthInfo" id="apidoc.element.passport.Authenticator.prototype.transformAuthInfo.transformAuthInfo">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>transformAuthInfo
        <span class="apidocSignatureSpan">(fn, req, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">transformAuthInfo = function (fn, req, done) {
  if (typeof fn === &#x27;function&#x27;) {
    return this._infoTransformers.push(fn);
  }

  // private implementation that traverses the chain of transformers,
  // attempting to transform auth info
  var info = fn;

  // For backwards compatibility
  if (typeof req === &#x27;function&#x27;) {
    done = req;
    req = undefined;
  }

  var stack = this._infoTransformers;
  (function pass(i, err, tinfo) {
    // transformers use &#x27;pass&#x27; as an error to skip processing
    if (&#x27;pass&#x27; === err) {
      err = undefined;
    }
    // an error or transformed info was obtained, done
    if (err || tinfo) { return done(err, tinfo); }

    var layer = stack[i];
    if (!layer) {
      // if no transformers are registered (or they all pass), the default
      // behavior is to use the un-transformed info as-is
      return done(null, info);
    }


    function transformed(e, t) {
      pass(i + 1, e, t);
    }

    try {
      var arity = layer.length;
      if (arity == 1) {
        // sync
        var t = layer(info);
        transformed(null, t);
      } else if (arity == 3) {
        layer(req, info, transformed);
      } else {
        layer(info, transformed);
      }
    } catch(e) {
      return done(e);
    }
  })(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.unuse" id="apidoc.module.passport.Authenticator.prototype.unuse">module passport.Authenticator.prototype.unuse</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.unuse.unuse" id="apidoc.element.passport.Authenticator.prototype.unuse.unuse">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>unuse
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unuse = function (name) {
  delete this._strategies[name];
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Authenticator.prototype.use" id="apidoc.module.passport.Authenticator.prototype.use">module passport.Authenticator.prototype.use</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Authenticator.prototype.use.use" id="apidoc.element.passport.Authenticator.prototype.use.use">
        function <span class="apidocSignatureSpan">passport.Authenticator.prototype.</span>use
        <span class="apidocSignatureSpan">(name, strategy)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">use = function (name, strategy) {
  if (!strategy) {
    strategy = name;
    name = strategy.name;
  }
  if (!name) { throw new Error(&#x27;Authentication strategies must have a name&#x27;); }

  this._strategies[name] = strategy;
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Strategy" id="apidoc.module.passport.Strategy">module passport.Strategy</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Strategy.Strategy" id="apidoc.element.passport.Strategy.Strategy">
        function <span class="apidocSignatureSpan">passport.</span>Strategy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Strategy.prototype" id="apidoc.module.passport.Strategy.prototype">module passport.Strategy.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Strategy.prototype.authenticate" id="apidoc.element.passport.Strategy.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport.Strategy.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(req, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (req, options) {
  throw new Error(&#x27;Strategy#authenticate must be overridden by subclass&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.Strategy.prototype.authenticate" id="apidoc.module.passport.Strategy.prototype.authenticate">module passport.Strategy.prototype.authenticate</a></h1>


    <h2>
        <a href="#apidoc.element.passport.Strategy.prototype.authenticate.authenticate" id="apidoc.element.passport.Strategy.prototype.authenticate.authenticate">
        function <span class="apidocSignatureSpan">passport.Strategy.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(req, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (req, options) {
  throw new Error(&#x27;Strategy#authenticate must be overridden by subclass&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport._framework" id="apidoc.module.passport._framework">module passport._framework</a></h1>


    <h2>
        <a href="#apidoc.element.passport._framework.authenticate" id="apidoc.element.passport._framework.authenticate">
        function <span class="apidocSignatureSpan">passport._framework.</span>authenticate
        <span class="apidocSignatureSpan">(passport, name, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function authenticate(passport, name, options, callback) {
  if (typeof options == &#x27;function&#x27;) {
    callback = options;
    options = {};
  }
  options = options || {};

  var multi = true;

  // Cast `name` to an array, allowing authentication to pass through a chain of
  // strategies.  The first strategy to succeed, redirect, or error will halt
  // the chain.  Authentication failures will proceed through each strategy in
  // series, ultimately failing if all strategies fail.
  //
  // This is typically used on API endpoints to allow clients to authenticate
  // using their preferred choice of Basic, Digest, token-based schemes, etc.
  // It is not feasible to construct a chain of multiple strategies that involve
  // redirection (for example both Facebook and Twitter), since the first one to
  // redirect will halt the chain.
  if (!Array.isArray(name)) {
    name = [ name ];
    multi = false;
  }

  return function authenticate(req, res, next) {
    if (http.IncomingMessage.prototype.logIn
        &#x26;&#x26; http.IncomingMessage.prototype.logIn !== IncomingMessageExt.logIn) {
      require(&#x27;../framework/connect&#x27;).__monkeypatchNode();
    }


    // accumulator for failures from each strategy in the chain
    var failures = [];

    function allFailed() {
      if (callback) {
        if (!multi) {
          return callback(null, false, failures[0].challenge, failures[0].status);
        } else {
          var challenges = failures.map(function(f) { return f.challenge; });
          var statuses = failures.map(function(f) { return f.status; });
          return callback(null, false, challenges, statuses);
        }
      }

      // Strategies are ordered by priority.  For the purpose of flashing a
      // message, the first failure will be displayed.
      var failure = failures[0] || {}
        , challenge = failure.challenge || {}
        , msg;

      if (options.failureFlash) {
        var flash = options.failureFlash;
        if (typeof flash == &#x27;string&#x27;) {
          flash = { type: &#x27;error&#x27;, message: flash };
        }
        flash.type = flash.type || &#x27;error&#x27;;

        var type = flash.type || challenge.type || &#x27;error&#x27;;
        msg = flash.message || challenge.message || challenge;
        if (typeof msg == &#x27;string&#x27;) {
          req.flash(type, msg);
        }
      }
      if (options.failureMessage) {
        msg = options.failureMessage;
        if (typeof msg == &#x27;boolean&#x27;) {
          msg = challenge.message || challenge;
        }
        if (typeof msg == &#x27;string&#x27;) {
          req.session.messages = req.session.messages || [];
          req.session.messages.push(msg);
        }
      }
      if (options.failureRedirect) {
        return res.redirect(options.failureRedirect);
      }

      // When failure handling is not delegated to the application, the default
      // is to respond with 401 Unauthorized.  Note that the WWW-Authenticate
      // header will be set according to the strategies in use (see
      // actions#fail).  If multiple strategies failed, each of their challenges
      // will be included in the response.
      var rchallenge = []
        , rstatus, status;

      for (var j = 0, len = failures.length; j &#x3c; len; j++) {
        failure = failures[j];
        challenge = failure.challenge;
        status = failure.status;

        rstatus = rstatus || status;
        if (typeof challenge == &#x27;string&#x27;) {
          rchallenge.push(challenge);
        }
      }

      res.statusCode = rstatus || 401;
      if (res.statusCode == 401 &#x26;&#x26; rchallenge.length) {
        res.setHeader(&#x27;WWW-Authenticate&#x27;, rchallenge);
      }
      if (options.failWithError) {
        return next(new AuthenticationError(http.STATUS_CODES[res.statusCode], rstatus));
      }
      res.end(http.STATUS_CODES[res.statusCode]);
    }

    (function attempt(i) {
      var layer = name[i];
      // If no more strategies exist in the chain, authentication has failed.
      if (!layer) { return allFailed(); }

      // Get the strategy, which will be used as prot ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport._framework.initialize" id="apidoc.element.passport._framework.initialize">
        function <span class="apidocSignatureSpan">passport._framework.</span>initialize
        <span class="apidocSignatureSpan">(passport)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initialize(passport) {

  return function initialize(req, res, next) {
    req._passport = {};
    req._passport.instance = passport;

    if (req.session &#x26;&#x26; req.session[passport._key]) {
      // load data from existing session
      req._passport.session = req.session[passport._key];
    }

    next();
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport._framework.authenticate" id="apidoc.module.passport._framework.authenticate">module passport._framework.authenticate</a></h1>


    <h2>
        <a href="#apidoc.element.passport._framework.authenticate.authenticate" id="apidoc.element.passport._framework.authenticate.authenticate">
        function <span class="apidocSignatureSpan">passport._framework.</span>authenticate
        <span class="apidocSignatureSpan">(passport, name, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function authenticate(passport, name, options, callback) {
  if (typeof options == &#x27;function&#x27;) {
    callback = options;
    options = {};
  }
  options = options || {};

  var multi = true;

  // Cast `name` to an array, allowing authentication to pass through a chain of
  // strategies.  The first strategy to succeed, redirect, or error will halt
  // the chain.  Authentication failures will proceed through each strategy in
  // series, ultimately failing if all strategies fail.
  //
  // This is typically used on API endpoints to allow clients to authenticate
  // using their preferred choice of Basic, Digest, token-based schemes, etc.
  // It is not feasible to construct a chain of multiple strategies that involve
  // redirection (for example both Facebook and Twitter), since the first one to
  // redirect will halt the chain.
  if (!Array.isArray(name)) {
    name = [ name ];
    multi = false;
  }

  return function authenticate(req, res, next) {
    if (http.IncomingMessage.prototype.logIn
        &#x26;&#x26; http.IncomingMessage.prototype.logIn !== IncomingMessageExt.logIn) {
      require(&#x27;../framework/connect&#x27;).__monkeypatchNode();
    }


    // accumulator for failures from each strategy in the chain
    var failures = [];

    function allFailed() {
      if (callback) {
        if (!multi) {
          return callback(null, false, failures[0].challenge, failures[0].status);
        } else {
          var challenges = failures.map(function(f) { return f.challenge; });
          var statuses = failures.map(function(f) { return f.status; });
          return callback(null, false, challenges, statuses);
        }
      }

      // Strategies are ordered by priority.  For the purpose of flashing a
      // message, the first failure will be displayed.
      var failure = failures[0] || {}
        , challenge = failure.challenge || {}
        , msg;

      if (options.failureFlash) {
        var flash = options.failureFlash;
        if (typeof flash == &#x27;string&#x27;) {
          flash = { type: &#x27;error&#x27;, message: flash };
        }
        flash.type = flash.type || &#x27;error&#x27;;

        var type = flash.type || challenge.type || &#x27;error&#x27;;
        msg = flash.message || challenge.message || challenge;
        if (typeof msg == &#x27;string&#x27;) {
          req.flash(type, msg);
        }
      }
      if (options.failureMessage) {
        msg = options.failureMessage;
        if (typeof msg == &#x27;boolean&#x27;) {
          msg = challenge.message || challenge;
        }
        if (typeof msg == &#x27;string&#x27;) {
          req.session.messages = req.session.messages || [];
          req.session.messages.push(msg);
        }
      }
      if (options.failureRedirect) {
        return res.redirect(options.failureRedirect);
      }

      // When failure handling is not delegated to the application, the default
      // is to respond with 401 Unauthorized.  Note that the WWW-Authenticate
      // header will be set according to the strategies in use (see
      // actions#fail).  If multiple strategies failed, each of their challenges
      // will be included in the response.
      var rchallenge = []
        , rstatus, status;

      for (var j = 0, len = failures.length; j &#x3c; len; j++) {
        failure = failures[j];
        challenge = failure.challenge;
        status = failure.status;

        rstatus = rstatus || status;
        if (typeof challenge == &#x27;string&#x27;) {
          rchallenge.push(challenge);
        }
      }

      res.statusCode = rstatus || 401;
      if (res.statusCode == 401 &#x26;&#x26; rchallenge.length) {
        res.setHeader(&#x27;WWW-Authenticate&#x27;, rchallenge);
      }
      if (options.failWithError) {
        return next(new AuthenticationError(http.STATUS_CODES[res.statusCode], rstatus));
      }
      res.end(http.STATUS_CODES[res.statusCode]);
    }

    (function attempt(i) {
      var layer = name[i];
      // If no more strategies exist in the chain, authentication has failed.
      if (!layer) { return allFailed(); }

      // Get the strategy, which will be used as prot ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport._framework.initialize" id="apidoc.module.passport._framework.initialize">module passport._framework.initialize</a></h1>


    <h2>
        <a href="#apidoc.element.passport._framework.initialize.initialize" id="apidoc.element.passport._framework.initialize.initialize">
        function <span class="apidocSignatureSpan">passport._framework.</span>initialize
        <span class="apidocSignatureSpan">(passport)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initialize(passport) {

  return function initialize(req, res, next) {
    req._passport = {};
    req._passport.instance = passport;

    if (req.session &#x26;&#x26; req.session[passport._key]) {
      // load data from existing session
      req._passport.session = req.session[passport._key];
    }

    next();
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.strategies" id="apidoc.module.passport.strategies">module passport.strategies</a></h1>


    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy" id="apidoc.element.passport.strategies.SessionStrategy">
        function <span class="apidocSignatureSpan">passport.strategies.</span>SessionStrategy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SessionStrategy() {
  Strategy.call(this);
  this.name = &#x27;session&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.strategies.SessionStrategy" id="apidoc.module.passport.strategies.SessionStrategy">module passport.strategies.SessionStrategy</a></h1>


    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy.SessionStrategy" id="apidoc.element.passport.strategies.SessionStrategy.SessionStrategy">
        function <span class="apidocSignatureSpan">passport.strategies.</span>SessionStrategy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SessionStrategy() {
  Strategy.call(this);
  this.name = &#x27;session&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy.super_" id="apidoc.element.passport.strategies.SessionStrategy.super_">
        function <span class="apidocSignatureSpan">passport.strategies.SessionStrategy.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.strategies.SessionStrategy.prototype" id="apidoc.module.passport.strategies.SessionStrategy.prototype">module passport.strategies.SessionStrategy.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate" id="apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport.strategies.SessionStrategy.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(req, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (req, options) {
  if (!req._passport) { return this.error(new Error(&#x27;passport.initialize() middleware not in use&#x27;)); }
  options = options || {};

  var self = this,
      su;
  if (req._passport.session) {
    su = req._passport.session.user;
  }

  if (su || su === 0) {
    // NOTE: Stream pausing is desirable in the case where later middleware is
    //       listening for events emitted from request.  For discussion on the
    //       matter, refer to: https://github.com/jaredhanson/passport/pull/106

    var paused = options.pauseStream ? pause(req) : null;
    req._passport.instance.deserializeUser(su, req, function(err, user) {
      if (err) { return self.error(err); }
      if (!user) {
        delete req._passport.session.user;
        self.pass();
        if (paused) {
          paused.resume();
        }
        return;
      }
      var property = req._passport.instance._userProperty || &#x27;user&#x27;;
      req[property] = user;
      self.pass();
      if (paused) {
        paused.resume();
      }
    });
  } else {
    self.pass();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport.strategies.SessionStrategy.prototype.authenticate" id="apidoc.module.passport.strategies.SessionStrategy.prototype.authenticate">module passport.strategies.SessionStrategy.prototype.authenticate</a></h1>


    <h2>
        <a href="#apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate.authenticate" id="apidoc.element.passport.strategies.SessionStrategy.prototype.authenticate.authenticate">
        function <span class="apidocSignatureSpan">passport.strategies.SessionStrategy.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(req, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (req, options) {
  if (!req._passport) { return this.error(new Error(&#x27;passport.initialize() middleware not in use&#x27;)); }
  options = options || {};

  var self = this,
      su;
  if (req._passport.session) {
    su = req._passport.session.user;
  }

  if (su || su === 0) {
    // NOTE: Stream pausing is desirable in the case where later middleware is
    //       listening for events emitted from request.  For discussion on the
    //       matter, refer to: https://github.com/jaredhanson/passport/pull/106

    var paused = options.pauseStream ? pause(req) : null;
    req._passport.instance.deserializeUser(su, req, function(err, user) {
      if (err) { return self.error(err); }
      if (!user) {
        delete req._passport.session.user;
        self.pass();
        if (paused) {
          paused.resume();
        }
        return;
      }
      var property = req._passport.instance._userProperty || &#x27;user&#x27;;
      req[property] = user;
      self.pass();
      if (paused) {
        paused.resume();
      }
    });
  } else {
    self.pass();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
